{"version":3,"sources":["strategy/quizGenerator.ts","app/math1/QuizView.tsx","strategy/FieldLabel.tsx","strategy/StrategyEditor.tsx","common/lazyExecute.ts","strategy/StrategyView.tsx","app/math1/Section.tsx","app/math1/MathApp.tsx","App.tsx","serviceWorker.ts","redux/command/AppCommand.ts","redux/command/math/UpdateMathCommand.ts","redux/command/InitCommand.ts","index.tsx","redux/rootReducer.ts"],"names":["randomInt","max","min","parseInt","String","Math","random","QuizView","props","show","v","className","ps","problems","map","p","i","key","num1","operator","num2","num3","FieldLabel","title","style","width","children","StrategyEditor","value","levelUp","space","quizLine","checkSpace","e","onChange","lazySaveLine","func","time","timer","args","arguments","clearTimeout","setTimeout","lazyExecute","Slider","valueLabelDisplay","aria-label","event","step","defaultValue","FormControlLabel","control","Radio","checked","undefined","color","label","name","inputProps","visible","display","StrategyView","plusMinus","useState","editMode","setEditMode","showText","Fab","size","onClick","Button","variant","Section","setProblems","useEffect","range","strategy","pipe","first","second","row","a","b","Error","generateQuiz","bufferCount","toArray","catchError","err","caught","alert","subscribe","cube","MathApp","params","useParams","console","log","history","useHistory","defaultStrategies","str","Base64","decode","config","js","JSON","parse","strategies","setStrategies","updateStrategies","s","push","encode","stringify","elements","newS","oldS","oldI","App","strict","path","to","Boolean","window","location","hostname","match","AppCommand","Command","UpdateMathCommand","math","state","dispatch","this","InitCommand","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","enhanceCommandReducer","action","applyMiddleware","commandMiddleware","createHashHistory","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message","run"],"mappings":"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","file":"static/js/main.37ee587c.chunk.js","sourcesContent":["import {Strategy} from \"./Strategy\";\nimport {Quiz} from \"../app/math1/MathApp\";\n\nconst randomInt = (max: number, min: number = 0) => {\n    return parseInt(String(Math.random() * (max - min))) + min;\n};\n\nexport function generateQuiz(strategy: Strategy): Quiz {\n\n    for (let i = 0; i < 1000; i++) {\n        let first = randomInt(strategy.max, 1);\n        let second = randomInt(strategy.max, 1);\n\n        // 检查最大值\n        if (first + second > strategy.max) {\n            continue;\n        }\n\n        // 检查进位\n        if (strategy.levelUp && first % 10 + second % 10 < 10) {\n            continue;\n        }\n\n        // 加减法\n        const operator: any = strategy.operator === undefined ? [\"+\", \"-\"][randomInt(100) % 2] : strategy.operator;\n        let row: any = [first, second, first + second];\n        if (operator === '-') {\n            const [a, b, c] = row;\n            row = [c, b, a];\n        }\n\n        let spacePosition = strategy.space === undefined ? randomInt(3) : strategy.space;\n\n        row[spacePosition] = null;\n\n        return {\n            num1: row[0],\n            num2: row[1],\n            num3: row[2],\n            operator: operator,\n        };\n    }\n\n    throw new Error(\"数值范围不对，生成失败\");\n}","import React, {FunctionComponent} from 'react';\nimport {Quiz} from \"./MathApp\";\n\ninterface Props {\n    problems: Array<Quiz>,\n}\n\nconst QuizView: FunctionComponent<Props> = (props) => {\n\n    const show = (v?: number) => {\n        if (v != null) {\n            return <span>{v}</span>;\n        } else {\n            return <div className='space-box'/>\n        }\n    };\n    const ps = props.problems.map((p, i) => {\n        return <div key={i}>\n            <div>{show(p.num1)}</div>\n            <div className='operator'>{p.operator}</div>\n            <div>{show(p.num2)}</div>\n            <div className='eq'>=</div>\n            <div>{show(p.num3)}</div>\n        </div>;\n    });\n    return <div className='row'>\n        {ps}\n    </div>;\n};\n\nexport default QuizView;\n","import React, { FunctionComponent } from 'react';\n\ninterface Props {\n    title: string\n}\n\nconst FieldLabel: FunctionComponent<Props> = (props) => {\n    return <div className='form-label'>\n        <div className='title'>{props.title}</div>\n        <div style={{width: 500}}>\n            {props.children}\n        </div>\n    </div>;\n};\n\nexport default FieldLabel;\n","import React, {FunctionComponent} from 'react';\nimport {Strategy} from \"./Strategy\";\nimport {Consumer} from \"../common\";\nimport {FormControlLabel, Radio, Slider, TextField} from \"@material-ui/core\";\nimport FieldLabel from \"./FieldLabel\";\nimport {lazyExecute} from \"../common/lazyExecute\";\n\ninterface Props {\n    value: Strategy,\n    onChange: Consumer<Strategy>,\n}\n\nconst StrategyEditor: FunctionComponent<Props> = (props) => {\n    const {max, operator, levelUp, space, quizLine} = props.value;\n\n    const checkSpace = (value?: 0 | 1 |2) => (e: any) => {\n        props.onChange({\n            ...props.value,\n            space: value,\n        })\n    };\n\n    const toInt = (str: string) => {\n        try {\n            return parseInt(str);\n        } catch (e) {\n            return 0;\n        }\n    };\n\n    const lazySaveLine = lazyExecute((value: number) => {\n        props.onChange({\n            ...props.value,\n            quizLine: value as number,\n        })\n    }, 200);\n\n    return <div className='form'>\n        <div>\n            <FieldLabel title={\"数值范围\"}>\n                <div>\n                    <Slider valueLabelDisplay=\"auto\"\n                            aria-label=\"最大值\"\n                            onChange={(event, value) => {\n                                props.onChange({\n                                    ...props.value,\n                                    max: value as number,\n                                })\n                            }}\n                            step={5}\n                            min={10}\n                            max={200}\n                            defaultValue={max} />\n                </div>\n            </FieldLabel>\n        </div>\n\n        <div>\n            <FieldLabel title={\"加减法\"}>\n                <div>\n                    <FormControlLabel control={<Radio\n                        checked={operator === undefined}\n                        onChange={(event, checked) => {\n                            props.onChange({\n                                ...props.value,\n                                operator: undefined\n                            })\n                        }}\n                        color=\"default\"\n                    />} label={\"随机\"}/>\n\n                    <FormControlLabel control={<Radio\n                        checked={operator === '+'}\n                        onChange={(event, checked) => {\n                            props.onChange({\n                                ...props.value,\n                                operator: \"+\"\n                            })\n                        }}\n                        color=\"primary\"\n                    />} label={\"加法\"}/>\n\n                    <FormControlLabel control={<Radio\n                        checked={operator === '-'}\n                        onChange={(event, checked) => {\n                            props.onChange({\n                                ...props.value,\n                                operator: \"-\"\n                            })\n                        }}\n                        color=\"secondary\"\n                    />} label={\"减法\"}/>\n                </div>\n            </FieldLabel>\n        </div>\n        <div>\n            <FieldLabel title={\"空格位置\"}>\n                <div>\n                    <FormControlLabel control={<Radio\n                        checked={space === undefined}\n                        onChange={checkSpace(undefined)}\n                        color=\"default\"\n                        name=\"radio-button-demo\"\n                        inputProps={{'aria-label': 'A'}}\n                    />} label={\"随机\"}/>\n                    <FormControlLabel control={<Radio\n                        checked={space === 0}\n                        onChange={checkSpace(0)}\n                        color=\"primary\"\n                        name=\"radio-button-demo\"\n                        inputProps={{'aria-label': 'A'}}\n                    />} label={\"左边\"}/>\n\n                    <FormControlLabel control={<Radio\n                        checked={space === 1}\n                        onChange={checkSpace(1)}\n                        color=\"secondary\"\n                        name=\"radio-button-demo\"\n                        inputProps={{'aria-label': 'A'}}\n                    />} label={\"中间\"}/>\n\n                    <FormControlLabel control={<Radio\n                        checked={space === 2}\n                        onChange={checkSpace(2)}\n                        color=\"default\"\n                        name=\"radio-button-demo\"\n                        inputProps={{'aria-label': 'A'}}\n                    />} label={\"右边\"}/>\n\n\n                </div>\n            </FieldLabel>\n        </div>\n        <div>\n            <FieldLabel title={\"进退位\"}>\n                <div>\n                    <FormControlLabel\n                        control={<Radio\n                            checked={levelUp === undefined}\n                            onChange={(event, checked) => {\n                                props.onChange({\n                                    ...props.value,\n                                    levelUp: undefined,\n                                })\n                            }}\n                            color=\"default\"\n                            name=\"radio-button-demo\"\n                            inputProps={{'aria-label': 'A'}}\n                        />}\n                        label={\"随机\"}\n                    />\n\n                    <FormControlLabel\n                        control={<Radio\n                            checked={levelUp === true}\n                            onChange={(event, checked) => {\n                                props.onChange({\n                                    ...props.value,\n                                    levelUp: true,\n                                })\n                            }}\n                            color=\"primary\"\n                            name=\"radio-button-demo\"\n                            inputProps={{'aria-label': 'A'}}\n                        />}\n                        label={\"进/退位\"}\n                    />\n                    <FormControlLabel\n                        control={<Radio\n                            checked={levelUp === false}\n                            onChange={(event, checked) => {\n                                props.onChange({\n                                    ...props.value,\n                                    levelUp: false,\n                                })\n                            }}\n                            color=\"secondary\"\n                            name=\"radio-button-demo\"\n                            inputProps={{'aria-label': 'A'}}\n                        />}\n                        label={\"不进退位\"}\n                    />\n\n\n\n                </div>\n            </FieldLabel>\n        </div>\n        <div>\n            <FieldLabel title={\"题目行数\"}>\n                <Slider valueLabelDisplay=\"auto\"\n                        aria-label=\"题目行数\"\n                        onChange={(event, value) => {\n                            lazySaveLine(value as number);\n                        }}\n                        step={1}\n                        min={1}\n                        max={20}\n                        defaultValue={quizLine} />\n\n            </FieldLabel>\n        </div>\n    </div>;\n};\n\nexport default StrategyEditor;\n","export function lazyExecute<T extends Function>(func: T, time: number):T {\n    let timer: any = null;\n    const a: any = function () {\n        const args: any = arguments;\n        clearTimeout(timer);\n        timer = setTimeout(() => {\n            func(...args);\n        }, time);\n    };\n    return a;\n}","import React, {CSSProperties, FunctionComponent, useState} from 'react';\nimport {Button, Fab} from \"@material-ui/core\";\nimport StrategyEditor from \"./StrategyEditor\";\nimport {Strategy} from \"./Strategy\";\nimport {Value} from \"../common\";\nimport HighlightOffIcon from '@material-ui/icons/HighlightOff';\nimport EditRoundedIcon from '@material-ui/icons/EditRounded';\ninterface Props extends Value<Strategy> {\n}\n\nconst visible = (v: boolean): CSSProperties => {\n    if (v) {\n        return {}\n    } else {\n        return {display: 'none'}\n    }\n};\n\nconst StrategyView: FunctionComponent<Props> = (props) => {\n    const [editMode, setEditMode] = useState(false);\n\n    let plusMinus;\n    switch (props.value.operator) {\n        case \"+\":\n            plusMinus = \"加法\";\n            break;\n        case \"-\":\n            plusMinus = '减法';\n            break;\n        default:\n            plusMinus = '加减法';\n    }\n\n    const showText = `【${props.value.max}】以内【${plusMinus}】`;\n    return <div className='strategy-view'>\n        <div className='action-btn'>\n            <Fab color=\"primary\" size='small' style={visible(!editMode)} aria-label=\"edit\" onClick={() => setEditMode(true)}>\n                <EditRoundedIcon/>\n            </Fab>\n            \n            <Button variant=\"contained\"\n                    style={visible(editMode)}\n                    onClick={e => {\n                        setEditMode(false);\n                    }}\n                    color=\"secondary\">保存</Button>\n        </div>\n        <div style={visible(editMode)}>\n            <StrategyEditor value={props.value} onChange={props.onChange}/>\n        </div>\n        <h2 style={visible(!editMode)}>\n            {showText}\n        </h2>\n\n    </div>;\n};\n\nexport default StrategyView;\n","import React, {FunctionComponent, useEffect, useState} from 'react';\nimport {Strategy} from \"../../strategy/Strategy\";\nimport {range} from \"rxjs\";\nimport {bufferCount, catchError, map, toArray} from \"rxjs/operators\";\nimport {generateQuiz} from \"../../strategy/quizGenerator\";\nimport QuizView from \"./QuizView\";\nimport StrategyView from \"../../strategy/StrategyView\";\nimport {Consumer} from \"../../common\";\nimport {Quiz} from \"./MathApp\";\n\ninterface Props {\n    strategy: Strategy,\n    onChange: Consumer<Strategy>,\n}\n\nconst Section: FunctionComponent<Props> = (props) => {\n\n    const [problems, setProblems] = useState<Array<Array<Quiz>>>([]);\n\n    const updateStrategy = (strategy: Strategy) => {\n        props.onChange(strategy);\n    };\n\n    const columns = 7;\n    useEffect(() => {\n        range(0, props.strategy.quizLine * columns)\n            .pipe(\n                map(() => {\n                    return generateQuiz(props.strategy)\n                }),\n                bufferCount(7),\n                toArray(),\n                catchError((err, caught) => {\n                    alert(err);\n                    return [];\n                })\n            )\n            .subscribe(value => {\n                setProblems(value);\n            })\n    }, [props.strategy]);\n\n    const cube = problems.map((row,i) => {\n        return <QuizView key={i} problems={row}/>\n    });\n\n    return (\n        <div className='quiz-section'>\n            <StrategyView value={props.strategy} onChange={value => {\n                updateStrategy(value);\n            }}/>\n            {cube}\n        </div>\n    );\n};\n\nexport default Section;\n","import React, {FunctionComponent, useState} from 'react';\nimport {useHistory, useParams} from \"react-router-dom\";\nimport {Strategy} from \"../../strategy/Strategy\";\nimport {Base64} from \"js-base64\";\nimport Section from \"./Section\";\nimport {Button} from \"@material-ui/core\";\n\ninterface Props {\n}\n\nexport interface Quiz {\n    num1?: number,\n    operator: string,\n    num2?: number,\n    num3?: number,\n}\n\nconst createDefaultStrategy = (): Strategy => {\n    return {\n        levelUp: true,\n        space: 2,\n        operator: \"+\",\n        max: 100,\n        quizLine: 10,\n    };\n};\n\ninterface StrategyParam {\n    config: string,\n}\n\nconst MathApp: FunctionComponent<Props> = (props) => {\n    const params = useParams<StrategyParam>();\n    console.log(params);\n    const history = useHistory();\n\n    let defaultStrategies: Array<Strategy> = [createDefaultStrategy()];\n\n    try {\n        let str = Base64.decode(params.config);\n        let js = JSON.parse(str);\n        if (js != null) {\n            defaultStrategies = js;\n        }\n    } catch (e) {\n    }\n\n    const [strategies, setStrategies] = useState<Array<Strategy>>(defaultStrategies);\n\n    const updateStrategies = (s: Array<Strategy>) => {\n        setStrategies(s);\n        history.push(`/math1/${Base64.encode(JSON.stringify(s))}`);\n    };\n    const addSection = () => {\n        updateStrategies([\n            ...strategies,\n            createDefaultStrategy(),\n        ]);\n    };\n\n    const elements = strategies.map((strategy, i) => {\n        return <Section strategy={strategy} onChange={s => {\n            const newS = strategies.map((oldS, oldI) => {\n                if (oldI === i) {\n                    return s;\n                } else {\n                    return oldS;\n                }\n            });\n\n            updateStrategies(newS);\n        }}/>\n    });\n\n    return (\n        <div>\n            {elements}\n            <Button color={'primary'} onClick={addSection}>增加题目</Button>\n        </div>\n    );\n};\n\nexport default MathApp;\n","import React from 'react';\nimport './App.scss';\nimport {Route, Switch, Redirect, useParams} from \"react-router-dom\";\nimport MathApp from \"./app/math1/MathApp\";\n\n\nfunction App() {\n    console.log(useParams());\n    return <Switch>\n        <Route strict={true} path='/math1/:config?'>\n            <MathApp/>\n        </Route>\n        <Route>\n            <Redirect to=\"/math1/\" />\n        </Route>\n    </Switch>\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import {Command} from \"redux-commands\";\nimport {AppStore} from \"../AppStore\";\n\nexport abstract class AppCommand extends Command<AppStore> {\n\n}","import {AppCommand} from \"../AppCommand\";\nimport {AppStore, MathStore} from \"../../AppStore\";\nimport {Dispatch} from \"redux\";\n\nexport class UpdateMathCommand extends AppCommand {\n    math: Partial<MathStore>;\n\n    constructor(math: Partial<MathStore>) {\n        super();\n        this.math = math;\n    }\n\n    name(): string {\n        return \"Init/Strategy\";\n    }\n\n    process(state: AppStore, dispatch: Dispatch<any>): AppStore {\n        return {\n            ...state,\n            math: {\n                ...state?.math,\n                ...this.math,\n            }\n        }\n    }\n}","import {AppCommand} from \"./AppCommand\";\nimport {AppStore} from \"../AppStore\";\nimport {Dispatch} from \"redux\";\nimport {UpdateMathCommand} from \"./math/UpdateMathCommand\";\n\nexport class InitCommand extends AppCommand {\n    name(): string {\n        return \"InitApp\";\n    }\n\n    async process(state: AppStore, dispatch: Dispatch): Promise<any> {\n        dispatch(new UpdateMathCommand({\n            strategy: {\n                levelUp: true,\n                space: 2,\n                operator: \"+\",\n                max: 100,\n                quizLine: 10,\n            },\n        }));\n    }\n\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport {rootReducer} from \"./redux/rootReducer\";\nimport {applyMiddleware, compose, createStore} from \"redux\";\nimport {Provider} from 'react-redux';\nimport {commandMiddleware, enhanceCommandReducer} from \"redux-commands\";\nimport {InitCommand} from \"./redux/command/InitCommand\";\nimport {Router} from \"react-router-dom\";\nimport {createHashHistory} from 'history';\n// @ts-ignore\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nconst store = createStore(enhanceCommandReducer(rootReducer),\n    composeEnhancers(applyMiddleware(\n        commandMiddleware,\n    )));\n\nconst history = createHashHistory();\n\nconst run = async () => {\n    await store.dispatch(new InitCommand());\n    ReactDOM.render(\n        <React.StrictMode>\n            <Router history={history}>\n                <Provider store={store}>\n                    <App/>\n                </Provider>\n            </Router>\n        </React.StrictMode>,\n        document.getElementById('root')\n    );\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n    serviceWorker.unregister();\n};\n\nrun();","import {AppStore} from \"./AppStore\";\n\nexport function rootReducer(state: AppStore | undefined, action: any) {\n    if (state === undefined) {\n        return {} as AppStore;\n    }\n\n    return state;\n}"],"sourceRoot":""}